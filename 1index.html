<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—ä¸¦ã¹æ›¿ãˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .container {
            text-align: center;
        }
        .characters {
            font-size: 2em;
            margin-bottom: 20px;
        }
        .counter {
            font-size: 1.5em;
            margin-bottom: 20px;
        }
        .message, .counter-message {
            font-size: 2em;
            color: green;
            margin-top: 20px;
        }
        .highlight {
            color: red;
        }
        .buttons {
            margin-top: 20px;
        }
        .buttons button {
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="counterMessage" class="counter-message"></div>
        <div id="counter" class="counter">0ï¼40320</div>
        <div id="randomCharacters" class="characters"></div>
        <div class="buttons">
            <button id="shuffleButton" onclick="shuffleCharacters()">å†ã‚·ãƒ£ãƒƒãƒ•ãƒ«</button>
            <button id="shuffle100Button" onclick="shuffleCharacters100()">100å›ã‚·ãƒ£ãƒƒãƒ•ãƒ«</button>
        </div>
        <div id="message" class="message"></div>
    </div>

    <script>
        const characters = ["äºº", "å", "ãƒ", "ãƒ¡", "ãƒ©", "ãƒ‹", "ã‚¢", "ãƒ³"];
        const targetString = "äººåãƒãƒ¡ãƒ©ãƒ‹ã‚¢ãƒ³";
        let shuffleCount = 0;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function updateCounterMessage() {
            let message = "";
            if (shuffleCount <= 10000) {
                message = `æƒã†ç¢ºç‡ã¯1/40320ã§ã™ã‚ˆ<span class="highlight">â€¼ï¸</span>`;
            } else if (shuffleCount <= 20160) {
                message = `1ä¸‡å›è¶…ãˆãŸ<span class="highlight">â€¼ï¸ğŸ‘€</span>`;
            } else if (shuffleCount <= 30000) {
                message = `å¤šåˆ†ãã‚ãã‚<span class="highlight">â€¼ï¸âœŒï¸</span>`;
            } else if (shuffleCount <= 40320) {
                message = `40320å›ã‚·ãƒ£ãƒƒãƒ•ãƒ«ç›®å‰ã§ã™ã‚ˆ<span class="highlight">â€¼ï¸â€¼ï¸</span>`;
            } else {
                message = `ç¢ºç‡çš„ã«ã¯ã‚‚ã†å‡ºã¦ã„ã‚‹ã®ã«<span class="highlight">â€¦</span>`;
            }
            document.getElementById('counterMessage').innerHTML = message;
        }

        function shuffleCharacters() {
            if (document.getElementById('shuffleButton').disabled) return;
            shuffleCount++;
            const shuffledCharacters = [...characters];
            shuffleArray(shuffledCharacters);
            const shuffledString = shuffledCharacters.join('');
            document.getElementById('randomCharacters').innerText = shuffledString;
            document.getElementById('counter').innerText = `${shuffleCount}ï¼40320`;
            updateCounterMessage();
            
            if (shuffledString === targetString) {
                document.getElementById('shuffleButton').innerText = "æˆåŠŸï¼";
                document.getElementById('shuffleButton').disabled = true;
                document.getElementById('shuffle100Button').innerText = "æˆåŠŸï¼";
                document.getElementById('shuffle100Button').disabled = true;
                document.getElementById('message').innerHTML = `ã‚„ã£ãŸã­<span class="highlight">â€¼â€¼</span>âœŒï¸âœŒï¸ğŸ‘€ ä¸–ç•Œä¸­ã®ãƒãƒ¡ãƒ©ãƒ‹ã‚¢ãƒ³ã‚‚å–œã‚“ã§ã„ã¾ã™<span class="highlight">â€¼ï¸â€¼ï¸</span>`;
            }
        }

        function shuffleCharacters100() {
            for (let i = 0; i < 100; i++) {
                shuffleCharacters();
                if (document.getElementById('shuffleButton').disabled) break;
            }
        }

        // åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚ã«ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦è¡¨ç¤º
        shuffleCharacters();
    </script>
</body>
</html>
